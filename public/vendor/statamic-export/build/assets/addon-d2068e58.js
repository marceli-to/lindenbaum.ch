function h(t,e,l,i,n,r,c,p){var s=typeof t=="function"?t.options:t;e&&(s.render=e,s.staticRenderFns=l,s._compiled=!0),i&&(s.functional=!0),r&&(s._scopeId="data-v-"+r);var o;if(c?(o=function(a){a=a||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!a&&typeof __VUE_SSR_CONTEXT__<"u"&&(a=__VUE_SSR_CONTEXT__),n&&n.call(this,a),a&&a._registeredComponents&&a._registeredComponents.add(c)},s._ssrRegister=o):n&&(o=p?function(){n.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:n),o)if(s.functional){s._injectStyles=o;var u=s.render;s.render=function(_,f){return o.call(f),u(_,f)}}else{var d=s.beforeCreate;s.beforeCreate=d?[].concat(d,o):[o]}return{exports:t,options:s}}const m={props:["collections","fileTypes","fieldHandles"],data(){return{collectionHandle:null,fileType:"xlsx",headers:!0,excludedFields:[],errors:{},loading:!1}},computed:{collectionOptions(){return this.collections.map(t=>({label:t.title,value:t.handle}))},fileTypeOptions(){return this.fileTypes.map(t=>({label:t.toUpperCase(),value:t}))},fieldHandlesForSelectedCollection(){return this.fieldHandles[this.collectionHandle]||[]}},methods:{submit(){this.loading=!0,this.errors={},fetch("/!/statamic-export/export",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('input[name="_token"]').value},body:JSON.stringify({collection_handle:this.collectionHandle,file_type:this.fileType,excluded_fields:this.excludedFields,headers:this.headers})}).then(t=>t.ok?t.blob():t.json().then(e=>Promise.reject(e))).then(t=>{const e=window.URL.createObjectURL(t),l=document.createElement("a");l.href=e,l.download=`${this.collectionHandle}.${this.fileType}`,document.body.appendChild(l),l.click(),l.remove()}).catch(t=>this.errors=t.errors).finally(()=>this.loading=!1)}}};var v=function(){var e=this,l=e._self._c;return l("div",[e._m(0),l("div",{staticClass:"card"},[l("form",{on:{submit:function(i){return i.preventDefault(),e.submit.apply(null,arguments)}}},[e._t("csrf"),l("div",{staticClass:"select-input-container mb-4"},[e._m(1),l("select-input",{attrs:{options:e.collectionOptions,id:"collection_handle"},model:{value:e.collectionHandle,callback:function(i){e.collectionHandle=i},expression:"collectionHandle"}}),e.errors.collection_handle?l("p",{staticClass:"text-red-500 text-xs mt-1"},[e._v(" "+e._s(e.errors.collection_handle[0])+" ")]):e._e()],1),l("div",{staticClass:"select-input-container mb-4"},[e._m(2),l("select-input",{staticStyle:{"min-width":"150px"},attrs:{options:e.fileTypeOptions,id:"file_type"},model:{value:e.fileType,callback:function(i){e.fileType=i},expression:"fileType"}}),e.errors.file_type?l("p",{staticClass:"text-red-500 text-xs mt-1"},[e._v(" "+e._s(e.errors.file_type[0])+" ")]):e._e()],1),l("div",{staticClass:"select-input-container mb-4"},[e._m(3),l("v-select",{attrs:{id:"excluded_fields",multiple:!0,disabled:e.fieldHandlesForSelectedCollection.length===0,options:e.fieldHandlesForSelectedCollection},model:{value:e.excludedFields,callback:function(i){e.excludedFields=i},expression:"excludedFields"}})],1),l("div",{staticClass:"mb-4",staticStyle:{"min-width":"150px"}},[l("label",{attrs:{for:"headers"}},[e._m(4),l("toggle-input",{attrs:{id:"headers"},model:{value:e.headers,callback:function(i){e.headers=i},expression:"headers"}})],1)]),l("div",{staticClass:"flex"},[l("button",{staticClass:"btn-primary",attrs:{type:"submit",disabled:e.loading||!e.collectionHandle}},[e._v(" "+e._s(e.__("Export collection"))+" ")]),e.loading?l("loading-graphic",{staticClass:"ml-4",attrs:{inline:""}}):e._e()],1)],2)])])},y=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-6"},[e("h1",{staticClass:"mb-2"},[t._v("Export")]),e("p",{staticClass:"text-sm text-gray"},[t._v(" Choose the collection you'd like to export, pick your preferred file type and you're ready to go. It really is that easy. ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2"},[e("label",{staticClass:"whitespace-nowrap",attrs:{for:"collection_handle"}},[t._v("Collection")]),e("p",{staticClass:"text-xs text-gray-700"},[t._v("Select the collection you want to export.")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2"},[e("label",{staticClass:"whitespace-nowrap",attrs:{for:"file_type"}},[t._v("File Type")]),e("p",{staticClass:"text-xs text-gray-700"},[t._v("Select the file type for the export.")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2"},[e("label",{staticClass:"whitespace-nowrap",attrs:{for:"excluded_fields"}},[t._v("Excluded Fields")]),e("p",{staticClass:"text-xs text-gray-700"},[t._v(" Select the fields you want to exclude from the export. If you don't select any fields, all fields will be included. (Pick a collection to get a list of all available fields) ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-2"},[e("label",{staticClass:"whitespace-nowrap",attrs:{for:"headers"}},[t._v("Include Headers")]),e("p",{staticClass:"text-xs text-gray-700"},[t._v("Add a header row as the first row of your exported file which contains the display names of the field for each column.")])])}],C=h(m,v,y,!1,null,null,null,null);const x=C.exports;Statamic.booting(()=>{Statamic.$components.register("export",x)});
